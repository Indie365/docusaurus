---
title: Announcing Docusaurus 3.0
authors:
  - slorber
tags: [release]
image: ./img/social-card.png
date: 2023-10-25
unlisted: true
---

Today we are extremely happy to finally **announce Docusaurus 3.0**! 🥳

This is a new **major version** of Docusaurus, coming with **new exciting features** and upgraded dependencies.

We respect [**Semantic Versioning**](https://semver.org/) and this release also includes **breaking changes** that we documented thoroughly in the [**v3 upgrade guide**](/docs/3.0.0-rc.0/migration/v3). Breaking changes can be annoying, but are necessary to set the ground for a new wave of Docusaurus features that we plan to implement later.

We initially planned to release more frequent major versions, but this one has taken longer than expected. **Upgrading to [MDX v2](https://mdxjs.com/blog/v2/) is the main challenge** to the adoption of this new version. We went the extra mile to make this upgrade as easy as possible, notably by adding [compatibility options for MDX v1](/docs/3.0.0-rc.0/api/docusaurus-config#markdown).

The simplest sites will only need to upgrade a few npm dependencies. For more complex sites, we came up with a few strategies than can help you upgrade more confidently:

- [prepare your site](/blog/preparing-your-site-for-docusaurus-v3) ahead of time, incrementally, while staying under Docusaurus v2
- [set up visual regression tests](/blog/upgrading-frontend-dependencies-with-confidence-using-visual-regression-testing) to catch unexpected visual changes happening during the upgrade

![v3.0 social-card image](./img/social-card.png)

{/* truncate */}

## Breaking changes

This section only gives you a quick glance. All the breaking changes are thoroughly documented on the [**v3 upgrade guide**](/docs/3.0.0-rc.0/migration/v3).

Docusaurus v3 upgraded a few dependencies to new major versions, each coming with their own breaking changes:

- Node.js v16 ➡️ v18
- React v17 ➡️ v18
- MDX v1 ➡️ v2
- TypeScript v4 ➡️ v5
- Prism-React-Renderer v1 ➡️ v2
- React-live v2 ➡️ v4
- Mermaid v9 ➡️ v10
- import-fresh v3 ➡️ jiti v1

A typical `package.json` dependency upgrade looks like:

```diff title="package.json"
 {
   "dependencies": {
     // upgrade to Docusaurus v3
-    "@docusaurus/core": "2.4.3",
-    "@docusaurus/preset-classic": "2.4.3",
+    "@docusaurus/core": "3.0.0",
+    "@docusaurus/preset-classic": "3.0.0",
     // upgrade to MDX v2
-    "@mdx-js/react": "^1.6.22",
+    "@mdx-js/react": "^2.3.0",
     // upgrade to prism-react-renderer v2.0+
-    "prism-react-renderer": "^1.3.5",
+    "prism-react-renderer": "^2.1.0",
     // upgrade to React v18.0+
-    "react": "^17.0.2",
-    "react-dom": "^17.0.2"
+    "react": "^18.2.0",
+    "react-dom": "^18.2.0"
   },
   "devDependencies": {
     // upgrade Docusaurus dev dependencies to v3
-    "@docusaurus/module-type-aliases": "2.4.3"
-    "@docusaurus/types": "2.4.3"
+    "@docusaurus/module-type-aliases": "3.0.0"
+    "@docusaurus/types": "3.0.0"
   }
   "engines": {
     // require Node.js 18.0+
-    "node": ">=16.14"
+    "node": ">=18.0"
   }
 }
```

Apart MDX v2, most breaking changes coming with those upgraded dependencies have been handled internally for you: most of the time, you shouldn't have to do anything. Outside dependencies, the only functional breaking changes coming explicitly from the Docusaurus codebase are:

- [#9189](https://github.com/facebook/docusaurus/pull/9189): new default blog RSS feed limit of 20 entries
- [#9308](https://github.com/facebook/docusaurus/pull/9308): fix and re-introduce the `:::warning` admonition, deprecate `:::caution`
- [#9310](https://github.com/facebook/docusaurus/pull/9310): remove the legacy versioned sidebar id prefix, used for sites versioned before `v2.0.0-beta.10` (December 2021)
- [#7966](https://github.com/facebook/docusaurus/pull/7966): refactor docs theme components, eventually requiring to you re-swizzle them

:::warning MDX v2 - the main challenge

The [**upgrade to MDX v2**](https://mdxjs.com/blog/v2/) is the main upgrade challenge. Some documents that compiled successfully under Docusaurus v2 might now **fail to compile** under Docusaurus v3, while others might **render differently**.

**Don't be intimidated**, most problems are **easy to fix** and often related to `{` and `<` characters that you now need to escape. However, depending on the size of your site, you might need to edit many files and feel overwhelmed. For this reason we provide a command [`npx docusaurus-mdx-checker`](https://github.com/slorber/docusaurus-mdx-checker) to help you get an estimate of the work to be done, and we recommend to [prepare your site in advance](/blog/preparing-your-site-for-docusaurus-v3).

If you created custom [MDX plugins](/docs/markdown-features/plugins) (Remark/Rehype), the AST is slightly different, and you might need to refactor them.

:::

## Highlights

A non-exhaustive list of new useful features coming with this new version. All the features are listed in the [**Docusaurus v3.0.0 release notes**](https://github.com/facebook/docusaurus/releases/tag/v3.0.0).

### ESM and TypeScript configs

In [#9317](https://github.com/facebook/docusaurus/pull/9317), Docusaurus v3 added support for ES Modules and TypeScript config files, including site config, docs sidebars, plugins and presets.

Here are 2 TypeScript examples, giving you a modern experience with IDE autocompletion:

```ts title="docusaurus.config.ts"
import type {Config} from '@docusaurus/types';
import type * as Preset from '@docusaurus/preset-classic';

const config: Config = {
  title: 'My Site',
  favicon: 'img/favicon.ico',
  // your site config ...
  presets: [
    [
      'classic',
      {
        // your preset config ...
      } satisfies Preset.Options,
    ],
  ],
  themeConfig: {
    // your theme config ...
  } satisfies Preset.ThemeConfig,
};

export default config;
```

```ts title="sidebars.ts"
import type {SidebarsConfig} from '@docusaurus/plugin-content-docs';

const sidebars: SidebarsConfig = {
  docs: ['introduction'],
};

export default sidebars;
```

### Markdown improvements

In [#8288](https://github.com/facebook/docusaurus/pull/8288) upgraded to [MDX v2](https://mdxjs.com/blog/v2/). This new version is a much better for content writers and plugin authors, and lays the ground to implement new exciting Markdown features.

This notably enables us to add a [CommonMark mode](/docs/3.0.0-rc.0/markdown-features#mdx-vs-commonmark) that should make it easier for existing documentations to adopt Docusaurus. It is currently opt-in and **experimental** ([some features will not work](https://github.com/facebook/docusaurus/issues/9092)), but the plan is to interpret `.md` files as CommonMark

We also introduced a new way to [configure Markdown globally for your site](/docs/3.0.0-rc.0/api/docusaurus-config#markdown), and plan to add more options later.

```js title="docusaurus.config.js"
export default {
  markdown: {
    format: 'mdx',
    mermaid: true,
    preprocessor: ({filePath, fileContent}) => {
      return fileContent.replaceAll('{{MY_VAR}}', 'MY_VALUE');
    },
    mdx1Compat: {
      comments: true,
      admonitions: true,
      headingIds: true,
    },
  },
};
```

Docusaurus now uses the [remark-directive](https://github.com/remarkjs/remark-directive) plugin to support admonition. This also offers you the ability to implement your own Remark plugins to extend Markdown with your own [custom directives](https://talk.commonmark.org/t/generic-directives-plugins-syntax/444) such as `:textDirective`, `::leafDirective` or `:::containerDirective`.

### Unlisted content

Docusaurus already supported a `draft: true` front matter option in our 3 content plugins (docs, blog, pages), which allows you to remove some pages from your production builds.

In [#8004](https://github.com/facebook/docusaurus/pull/8004), we introduced a new `unlisted: true` front matter option, which will keep your pages available in production builds, while "hiding" them and making them impossible to discover unless you have the url. This enables convenient workflows where you can easily ask for feedback on a piece of content before the final publication.

Unlisted content will:

- be excluded from `sitemap.xml`
- be excluded from SEO results thanks to `<meta name="robots" content="noindex, nofollow" />`
- be excluded from RSS feeds
- be excluded from Algolia DocSearch results
- be filtered from site navbar, docs sidebars, blog sidebar, blog archives, tags pages

Unlisted content will also display a banner so that you don't forget to turn it off once your content is ready for prime time. Here's an example of an [unlisted blog post](/tests/blog/unlisted-post)

[![Unlisted blog post showing an unlisted warning banner](./img/unlisted-blog.png)](/tests/blog/unlisted-post)

### React 18

#8961 feat: React 18 + automatic JSX runtime + build --dev

perf(core): use React 18 startTransition for hydration

- batching
- automatic JSX runtime
- warning experimental suspense / lazy / startTransition
- `docusaurus build --dev`: get clear error messages in dev, notably from React

### TypeScript

#9317 feat(core): support TypeScript + ESM configuration

#9258 feat: Docusaurus v3 upgrades and require TypeScript 5

#9050 feat: create official TypeScript base config @docusaurus/tsconfig

### Syntax highlighting

#9316 chore: upgrade syntax highlighting dependencies, prism-react-renderer to v2, react-live to v4

#8982 feat(theme-common): code block MagicComments support for TeX/LaTeX/Matlab

#8870 feat(theme-common): code block MagicComments support for Lua/Haskell -- and WebAssembly ;;

### Mermaid diagrams

#9305 feat(theme-mermaid): upgrade Mermaid to v10.4 - handle async rendering

### Other

#9028 feat(theme): add ability to inject data attributes from query-string - possibility to create an iframe/embed variant of a page

#9171 feat(client-redirects-plugin): support fully qualified urls and querystring/hash in destination/to url

#8156 feat: add eslint plugin no-html-links

- #8384 feat(eslint-plugin): new prefer-docusaurus-heading rule
